classes:
- system.designate.server.cluster
- system.bind.server.single
- cluster.nfv-lab
parameters:
  _param:
    keepalived_vip_interface: ens3
    keepalived_vip_virtual_router_id: 49
    cluster_vip_address: ${_param:openstack_dns_address}
    cluster_local_address: ${_param:single_address}
    cluster_node01_hostname: dns01
    cluster_node01_address: ${_param:openstack_dns_node01_address}
    cluster_node02_hostname: dns02
    cluster_node02_address: ${_param:openstack_dns_node02_address}
  linux:
    network:
      interface:
        ens3: ${_param:linux_single_interface}
  designate:
    server:
      backend:
        bind9:
          rndc_key: y1lcmdV1sy4erxYmKaPlnQ==
  bind:
    server:
      key:
        designate:
          secret: "Ktsigkey.+165+26816"
          algorithm: hmac-sha512
      allow-new-zones: true
      query: true
      control:
        local:
          enabled: true
          bind:
            address: ${_param:single_address}
            port: 953
          allow:
            - 127.0.0.1
            - ${_param:single_address}
          keys:
            - designate
